<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" >

    <head th:replace="fragments/template :: headtag">
        <title>Portfy - Index</title>
    </head>

    <body>
        <center>

            <h2 th:text="'Portfy - ' + ${title} + ' :D'" />

            <div class="card card-container" th:if="${currentUser}">
                <h4 class="card-title">Your name here</h4>
                <div class="card-content">
                    <div class="card-photo" alt="Your picture here" title="Your picture">
                        <img src="img/dog.jpg"/>
                    </div>
                    <div class="card-text">
                        <p>
                            Lorem ipsum per diam accumsan risus torquent pretium ullamcorper accumsan, lorem nibh feugiat per ut nisi vulputate luctus pulvinar, primis feugiat aliquam faucibus lacus curae eros nibh. praesent morbi mollis nam, sociosqu.
                        </p>
                    </div>
                </div>
            </div>

            <div class="card card-container" th:unless="${currentUser}">
                <h4 class="card-title">Search for an user!</h4>
                <div class="card-content center pd-10">
                    <form id="query-form">
                        <label for="username">User</label>
                        <input type="text" id="username" autofocus="autofocus"/>
                        <br/>
                        <input type="submit" value="Ok"/>
                    </form>
                </div>
            </div>

            <div style="margin-top:40px">
                <div th:if="${currentUser}">
                    <a class="paper-btn" th:href="${currentUser} + @{/projects}">Projects</a>
                    <a class="paper-btn" th:href="${currentUser} + @{/curriculum}">Curriculum</a>
                    <a class="paper-btn" th:href="${currentUser} + @{/contact}">Contact</a>
                </div>
            </div>

        </center>

        <script>
            $(function () {
                $('#query-form').submit(function (e) {
                    e.preventDefault();
                    var usr = $('#username').val();
                    if (usr) {
                        new Ajax('http://localhost:8080/exists/' + usr).get().then(function (d) {
                            window.location.href = d;
                        }, function (e) {
                            alert(e.responseText);
                            console.log(e);
                        });
                    }
                });
            });
        </script>

    </body>

</html>